<div class="card funnel-container">
  <div class="zone-title" style="margin-bottom: 8px">Pipeline Conversion</div>

  <div class="funnel-row" *ngFor="let stage of funnelStages; let i = index">
    <span class="funnel-label">{{ stage.label }}</span>
    <div class="funnel-bar-container">
      <div class="funnel-bar" 
           [style.width.%]="getWidth(stage.width)" 
           [style.opacity]="getOpacity(i)"
           [class.closed-stage]="isClosedStage(i)">
      </div>
    </div>
    <span class="funnel-metrics">{{ stage.value }}</span>
  </div>
</div>